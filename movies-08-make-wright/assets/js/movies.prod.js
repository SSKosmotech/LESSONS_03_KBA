"use strict";function ownKeys(e,t){var o,i=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)),i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(o,!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var my_theme_cookie=getCookie("ThemeName");console.log(my_theme_cookie),"dark_theme"===my_theme_cookie&&(document.body.classList.add("dark_theme"),document.getElementById("check_theme").setAttribute("checked","checked"));var Pagination2={props:{page:{type:Number,default:1,required:!0},total:{type:Number,default:0,required:!0}},methods:{goToPage:function(t){this.$emit("toPage",t)}},computed:{ifDisabledFirst:function(){return 1===this.page},ifDisabledLast:function(){return this.page===this.total},showFirst:function(){return 4<this.page&&6<this.total},showLast:function(){return this.page<this.total-3&&6<this.total},pagesRange:function(){var o=this.page-2,t=this.page+2;return this.page<5&&(o=1,t=5),this.page>this.total-4&&(o=this.total-4,t=this.total),o<1&&(o=1),t>this.total&&(t=this.total),6===this.total&&(o=1),Array(t-o+1).fill().map(function(t,e){return o+e})}},template:"#pagination2"},movieItem={props:["movie"],methods:{getMovieInfo:function(t){this.$emit("getMovie",t)},setFavorites:function(t){this.$emit("setFavorit",t)}},template:"#movieItem"},App={data:function(){return{API_KEY:"d7be29bf",search:"Batman",selectedType:"",year:"",movieList:[],movieInfo:[],showModal:!1,myFavorite:[],showFavoritesModal:!1,showAboutAddedModal:!1,showAboutDeletedModal:!1,totalPages:0,page:1,perPage:10,ifDisabledPrevButton:!1,ifDisabledNextButton:!1,ifDisabledPrev:!1,ifDisabledNext:!1,isActiveTheme:!1,showPagination:!1,showPaginationNextButton:!0,showPaginationPrevButton:!0}},components:{movieItem:movieItem,Pagination2:Pagination2},methods:{searchMovies:function(){var e=this;""!==this.search&&("all"===this.selectedType&&(this.selectedType=""),console.log(this.selectedType),axios.get("https://www.omdbapi.com/?apikey=".concat(this.API_KEY,"&s=").concat(this.search,"&type=").concat(this.selectedType,"&page=").concat(this.page,"&y=").concat(this.year)).then(function(t){e.movieList=t.data.Search,e.totalPages=Math.ceil(t.data.totalResults/10),console.log("this.totalPages: ".concat(e.totalPages)),e.page>=e.totalPages?e.ifDisabledNext=!0:e.ifDisabledNext=!1,1===e.page?e.ifDisabledPrev=!0:e.ifDisabledPrev=!1,e.page>=e.totalPages-5?(e.ifDisabledNextButton=!0,e.showPaginationNextButton=!1):e.showPaginationNextButton=!0,e.page<=5?(e.ifDisabledPrevButton=!0,e.showPaginationPrevButton=!1):e.showPaginationPrevButton=!0,console.log(t)}).catch(function(t){console.log(t)}).then(function(){}),console.log("this.page: ".concat(this.page)),console.log("this.totalPages: ".concat(this.totalPages)),this.showPagination=!0)},showMovieInfo:function(){this.showModal=!0},getMovieInfo:function(t){var e=this;axios.get("https://www.omdbapi.com/?apikey=".concat(this.API_KEY,"&i=").concat(t)).then(function(t){for(e.movieInfo=t.data,e.showMovieInfo(),console.log(t),console.log(e.movieInfo),i=0;i<3;i++)0===i?e.movieInfo.Ratings[i].Value=100-10*parseFloat("".concat(e.movieInfo.Ratings[i].Value)):e.movieInfo.Ratings[i].Value=100-parseFloat("".concat(e.movieInfo.Ratings[i].Value))}).catch(function(t){console.log(t)}).then(function(){})},setFavorites:function(e){console.log(e);var t=this.movieList.find(function(t){return t.imdbID===e}),o=this.myFavorite.findIndex(function(t){return t.imdbID===e});-1===o?(this.myFavorite.push(t),this.showAboutAdded()):(console.log("delFavoriteIndex= ".concat(o)),this.myFavorite.splice(o,1),this.showAboutDeleted()),localStorage.setItem("myFavorite",JSON.stringify(this.myFavorite)),console.log(this.myFavorite)},showFavorites:function(){this.showFavoritesModal=!0,console.log("Check: ".concat(this.myFavorite))},showAboutAdded:function(){this.showAboutAddedModal=!0},showAboutDeleted:function(){this.showAboutDeletedModal=!0},goToPage:function(t){this.page=t,console.log("pageNum: ".concat(t)),1!==t&&(this.ifDisabledPrev=!0),t<=5?(this.ifDisabledPrevButton=!0,this.showPaginationPrevButton=!1):(this.ifDisabledPrevButton=!1,this.showPaginationPrevButton=!0),t!==this.totalPages&&(this.ifDisabledNext=!0),t>=this.totalPages-5?(this.ifDisabledNextButton=!0,this.showPaginationNextButton=!1):(this.ifDisabledNextButton=!1,this.showPaginationNextButton=!0),this.searchMovies()},goToPageMovies:function(t){this.page=t,this.searchMovies()}},computed:{movieListWithFavorite:function(){var o=this,i=[];return this.movieList.forEach(function(e){var t=o.myFavorite.find(function(t){return e.imdbID===t.imdbID});e.inFav=void 0!==t,i.push(e)}),console.log(i),i}},created:function(){this.myFavorite=JSON.parse(localStorage.getItem("myFavorite"))||[]}};Vue.createApp(App).mount("#app");var checkbox=document.getElementById("check_theme");function getCookie(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function setCookie(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};(o=_objectSpread({path:"/"},o)).expires instanceof Date&&(o.expires=o.expires.toUTCString());var i=encodeURIComponent(t)+"="+encodeURIComponent(e);for(var a in o){i+="; "+a;var n=o[a];!0!==n&&(i+="="+n)}document.cookie=i}function deleteCookie(t){setCookie(t,"",{"max-age":-1})}checkbox.addEventListener("change",function(){this.checked?(console.log("Checkbox is checked.."),document.body.classList.toggle("dark_theme"),setCookie("ThemeName","dark_theme")):(console.log("Checkbox is not checked.."),document.body.classList.toggle("dark_theme"),deleteCookie("ThemeName"))});